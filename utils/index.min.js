var citySNJson={};function ajax(params){if(params=params||{},!params.url)throw new Error("Necessary parameters are missing.");var random=+new Date,hander=null,options={url:"",type:"GET",timeout:5e3,cache:!0,async:!0,headers:{},xhrFields:{},dataType:"json",data:{},jsonp:"callback",jsonpCallback:"jsonp_"+random,error:function(){},success:function(){},complete:function(){}},formatParams=function(json){var arr=[];for(var i in json)arr.push(encodeURIComponent(i)+"="+encodeURIComponent(json[i]));return arr.join("&")};for(var i in params)switch(i){case"type":options[i]=params[i].toUpperCase();break;case"dataType":options[i]=params[i].toLowerCase();break;default:options[i]=params[i]}if("object"==typeof options.data&&(options.data=formatParams(options.data)),"jsonp"==options.dataType){options.cache=params.cache||!1;var $head=document.getElementsByTagName("head")[0],$script=document.createElement("script");$head.appendChild($script),window[options.jsonpCallback]=function(json){$head.removeChild($script),window[options.jsonpCallback]=null,hander&&clearTimeout(hander),options.success(json),options.complete()},options.cache&&(options.data+=options.data?"&_"+random:"_"+random),options.data+="&"+options.jsonp+"="+options.jsonpCallback,options.url.indexOf("?")>-1?$script.src=(options.url+options.data).replace("?&","?"):$script.src=(options.url+"?"+options.data).replace("?&","?"),hander=setTimeout((function(){$head.removeChild($script),window[options.jsonpCallback]=null,options.error(),options.complete()}),options.timeout)}else{options.cache&&(options.data+=options.data?"&_"+random:"_"+random);var xhr=new(self.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");if(!xhr)return!1;for(var name in"POST"==options.type?(xhr.open(options.type,options.url,options.async),xhr.setRequestHeader("content-type","application/x-www-form-urlencoded")):(options.data&&(options.url+=options.url.indexOf("?")>-1?"&"+options.data:"?"+options.data),xhr.open(options.type,options.url,options.async),options.data=null),options.headers)xhr.setRequestHeader(name,options.headers[name]);if(options.xhrFields)for(var field in options.xhrFields)xhr[field]=options.xhrFields[field];xhr.send(options.data);var requestDone=!1;hander=setTimeout((function(){requestDone=!0,4!=xhr.readyState&&(xhr.abort(),options.error()),options.complete()}),options.timeout),xhr.onreadystatechange=function(){if(4==xhr.readyState&&!requestDone){if(xhr.status>=200&&xhr.status<300||304==xhr.status){var data="xml"==options.dataType?xhr.responseXML:xhr.responseText;if("json"==options.dataType)try{data=JSON.parse(data)}catch(e){data=eval("("+data+")")}options.success(data)}else options.error();hander&&clearTimeout(hander),options.complete()}}}}!function(){var num,fun;num=0,(fun=function(){ajax({url:"https://cn.ipcelou.com/api/ip",method:"get",dataType:"json",success:function(json){if(json.status)for(var key in json.data);},error:function(){num<3?setTimeout((function(){fun()}),1e3):console.log("Error:ipcelou"),num++}})})(),function(){var num=0,fun=function(){ajax({url:"https://www.cz88.net/api/cz88/ip/geo?ip",method:"get",dataType:"json",success:function(json){200==json.code&&(console.log(1),citySNJson.cz88=json.data)},error:function(){num<3?setTimeout((function(){fun()}),1e3):console.log("Error:ipcelou"),num++}})};fun()}()}();