function CheckAll(e){if(objEvent=getEvent(),objEvent.srcElement?id=objEvent.srcElement:id=objEvent.target,""!=e){var t=document.getElementsByName(e);for(i=0;i<t.length;i++)"checkbox"==t[i].type&&(t[i].checked=id.checked)}else{t=document.getElementsByTagName("input");for(i=0;i<t.length;i++)"checkbox"==t[i].type&&(t[i].checked=id.checked)}}function getEvent(){if(document.all)return window.event;for(func=getEvent.caller;null!=func;){var e=func.arguments[0];if(e&&(e.constructor==Event||e.constructor==MouseEvent||"object"==typeof e&&e.preventDefault&&e.stopPropagation))return e;func=func.caller}return null}pp=null,$.extend({refresh:function(e){window.location.href=e}}),jQuery.showfloatdiv=function(e){var i={txt:"数据加载中,请稍后...",classname:"progressBar",left:410,top:210,wantclose:1,suredo:function(e){return!1},succdo:function(e){},completetxt:"操作成功!",autoclose:1,ispost:0,cssname:"alert",isajax:0,intvaltime:1500,redirurl:"/"};if(e=e||{},$.extend(i,e),$("#qirebox_overlay").remove(),$("#qirebox").remove(),1==i.wantclose){var t=$('<div class="qirebox-overlayBG" id="qirebox_overlay"></div><div id="qirebox" class="qirebox png-img"><iframe frameborder="0" class="ui-iframe"></iframe><table class="ui-dialog-box"><tr><td><div class="ui-dialog"><div class="ui-dialog-cnt" id="ui-dialog-cnt"><div class="ui-dialog-tip alert" id="ui-cnt"><span id="xtip">'+i.txt+'</span></div></div><div class="ui-dialog-close"><span class="close">关闭</span></div></div></td></tr></table></div>');if($("body").append(t),$("#qirebox_overlay").fadeIn(500),$("#qirebox").fadeIn(500),$("#ui-cnt").removeClass("succ error alert loading").addClass(i.cssname),$(".ui-dialog-close").click(function(){$.closefloatdiv()}),1==i.isajax){objEvent=getEvent(),objEvent.srcElement?id=objEvent.srcElement:id=objEvent.target;var l=null!=id.attributes.data.nodeValue&&null!=id.attributes.data.nodeValue?id.attributes.data.nodeValue:id.data;$.ajax({url:l,async:!0,type:"get",cache:!0,dataType:"json",success:function(e,t){null!=e.msg&&null!=e.msg?$("#xtip").html(e.msg):$("#xtip").html(i.completetxt),i.succdo(e),null!=e.wantclose&&null!=e.wantclose?$.hidediv(e):1==i.autoclose&&$.hidediv(e),null==e.wantredir&&null==e.wantredir||(null!=e.redir||null!=e.redir?setTimeout("$.refresh('"+e.redir+"')",i.intvaltime):setTimeout("$.refresh('"+i.redirurl+"')",i.intvaltime))},error:function(e){$("#xtip").html("系统繁忙,请稍后再试...")}})}}else if(2==i.wantclose){objEvent=getEvent(),objEvent.srcElement?id=objEvent.srcElement:id=objEvent.target;l=null!=id.attributes.data.nodeValue&&null!=id.attributes.data.nodeValue?id.attributes.data.nodeValue:id.data,t=$('<div class="qirebox-overlayBG" id="qirebox_overlay"></div><div id="qirebox" class="qirebox png-img"><iframe frameborder="0" class="ui-iframe"></iframe><table class="ui-dialog-box"><tr><td><div class="ui-dialog"><div class="ui-dialog-cnt" id="ui-dialog-cnt"><div class="ui-dialog-tip alert" id="ui-cnt"><span id="xtip">'+i.txt+'</span></div></div><div class="ui-dialog-todo"><a class="ui-link ui-link-small" href="javascript:void(0);" id="surebt">确定</a><a class="ui-link ui-link-small cancelbt"  id="cancelbt">取消</a><input type="hidden" id="hideval" value=""/></div><div class="ui-dialog-close"><span class="close">关闭</span></div></div></td></tr></table></div>');$("body").append(t),$("#qirebox_overlay").fadeIn(500),$("#qirebox").fadeIn(500),$(".ui-dialog-close").click(function(){$.closefloatdiv()}),$(".cancelbt").click(function(){$.closefloatdiv()}),$("#surebt").click(function(e){i.suredo(e)?i.succdo(e):($(".ui-dialog-todo").remove(),$("#ui-cnt").removeClass("succ error alert").addClass("loading"),0==i.ispost?$.ajax({url:l,async:!0,type:"get",cache:!0,dataType:"json",success:function(e,t){null!=e.msg&&null!=e.msg?$("#xtip").html(e.msg):$("#xtip").html(i.completetxt),i.succdo(e),null!=e.wantclose&&null!=e.wantclose?$.hidediv(e):1==i.autoclose&&$.hidediv(e)},error:function(e){$("#xtip").html("系统繁忙,请稍后再试...")}}):$("#"+i.formid).qiresub({curobj:$("#surebt"),txt:"数据提交中,请稍后...",onsucc:function(e){i.succdo(e),$.hidediv(e)}}).post({url:i.url}))})}else{t=$('<div class="qirebox_overlayBG" id="qirebox_overlay"></div><div id="qirebox" class="qirebox"><iframe frameborder="0" class="ui-iframe"></iframe><div class="ui-dialog"><div class="ui-dialog-cnt" id="ui-dialog-cnt"><div class="ui-dialog-box"<div class="ui-cnt" id="ui-cnt">'+i.txt+"</div></div></div></div></div>");$("body").append(t),$("#qirebox_overlay").fadeIn(500),$("#qirebox").fadeIn(500)}$("#qirebox_overlay").bind("click",function(e){$.closefloatdiv(e),null!=pp&&clearTimeout(pp)})},jQuery.closefloatdiv=function(e){$("#qirebox_overlay").remove(),$("#qirebox").remove()},jQuery.hidediv=function(e){var i={intvaltime:1500};e=e||{},$.extend(i,e),null!=e.msg&&null!=e.msg&&$("#ui-cnt").html(e.msg),1==parseInt(e.rcode)?$("#ui-cnt").removeClass("loading error alert").addClass("succ"):parseInt(e.rcode)<1&&$("#ui-cnt").removeClass("loading alert succ").addClass("error"),pp=setTimeout("$.closefloatdiv()",i.intvaltime)},function(e){e.fn.qiresub=function(i){var t={txt:"数据提交中,请稍后...",redirurl:window.location.href,dataType:"json",onsucc:function(e){},onerr:function(){e.hidediv({msg:"系统繁忙"})},oncomplete:function(){},intvaltime:1500};i.curobj.attr("disabled",!0);var l=i.curobj.offset();i=e.extend(t,i);e.showfloatdiv({offset:l,txt:t.txt});var a=e(this),o=a.attr("id");return{post:function(l){e("#ui-cnt").removeClass("succ error alert").addClass("loading"),e.post(l.url,a.serializeArray(),function(l){i.curobj.attr("disabled",!1),t.onsucc(l),null==l.closediv&&null==l.closediv||e.closefloatdiv(),null==l.wantredir&&null==l.wantredir||(null!=l.redir||null!=l.redir?setTimeout("$.refresh('"+l.redir+"')",i.intvaltime):setTimeout("$.refresh('"+i.redirurl+"')",i.intvaltime))},i.dataType).error(function(){i.curobj.attr("disabled",!1),t.onerr()}).complete(function(){t.oncomplete(),i.curobj.attr("disabled",!1)})},implodeval:function(i){return val=e("#"+o+" :input").map(function(){if(""!=e(this).attr("name")&&null!=e(this).attr("name"))return e(this).attr("name")+"-"+e(this).val()}).get().join("-"),val},get:function(l){e(".ui-dialog-todo").remove(),e("#ui-cnt").removeClass("succ error alert").addClass("loading");var a=this.implodeval();e.get(l.url+"-"+a,"",function(e){i.curobj.attr("disabled",!1),t.onsucc(e),null==e.wantredir&&null==e.wantredir||(null!=e.redir||null!=e.redir?setTimeout("$.refresh("+e.redir+")",i.intvaltime):setTimeout("$.refresh("+i.redirurl+")",i.intvaltime))},i.dataType).error(function(){i.curobj.attr("disabled",!1),t.onerr()}).complete(function(){t.oncomplete(),i.curobj.attr("disabled",!1)})}}},e.fn.ajaxdel=function(i){var t={txt:"数据提交中,请稍后...",redirurl:window.location.href,dataType:"json",onsucc:function(e){},onerr:function(){},oncomplete:function(){},intvaltime:3e3};e(".ui-dialog-todo").remove(),e("#ui-cnt").removeClass("succ error alert").addClass("loading");i=e.extend(t,i);var l=e(this).attr("url");e.ajax({url:l,success:function(e){i.onsucc(e)},error:function(){i.onerr()},complete:function(){i.oncomplete()},dataType:"json"})}}(jQuery);